(this["webpackJsonpcanvas-perf"]=this["webpackJsonpcanvas-perf"]||[]).push([[0],{107:function(t,e,i){"use strict";i.r(e);var n,c=i(1),r=i.n(c),a=i(41),o=i.n(a),s=(i(53),i(10)),u=i(9),l=function(t,e){return{x:t.x+e.x,y:t.y+e.y}},d=function(t){var e=2*Math.random()*Math.PI;return{x:t*Math.cos(e),y:t*Math.sin(e)}},j=function(t){return Math.atan2(t.y,t.x)},h=function(t){return Math.atan2(t.y,t.x)/2/Math.PI*360},x="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACuElEQVRo3u1ZvYvUQBx9M85y6QRZRO5PELGyuiLbaXONcIjYCYKKiGynNwm7uRvR7opDTm3OxkPURrHRYmUDVpaKjdUhynEcFgpLzmTnZ3GrhNzu3uZjJxzkVZmZZPLevMxLMgNUqFChQplgWS+UUn4kojP/ypxzpZRyTQvgmZUzthova60dx3GWD40Ay7KeA9guW8SRrBd2Op3Itu2jAOx4PRHZjUZD+L7/3oSAzA4AgBBiDUCUrDfpRGYHAKDb7f62bfskgFPJNlNO5HIAADjnq6PaTDiRywEA8H3/m23b8wBmh7VP24ncDgD7IzWJaTpRiIBhkWpKBFtcXPyEvUkYcc5vKKUeZ+lISrlMRM6BI1bwG5szxtYHx0Jr/UhKeW9lZSW1M6MiNYmineC1Wm0jfmMiur2zs/N0aWnJStOR53k/GGMvJzm3SBG83W5vMcbexSuJ6OLu7u7bVqt1LFVnYyJ1WiIYADiOs6C1flHEiEwREYAvjLHXQogHnudtAYMUsizrDYCfZTM8AALAaSJywjD86jjOFSD2PyClXCOia2WzTAPO+VUeK6zn6awMaK3vFvIiKxP/BWitL5dNJjV5zu8wAFBKWb1e7zuAVLFZIn5xzm8ppZ4IAAiCYP4QkP8D4DNj7JUQ4qHnedvAXjSBiPY9PowxXwhx3vO8iePVdd25fr//YdLzi/gu4u12+wQRnU2QfzYzM3MuDXkA0FrfNEkeAEQYhpcwcGJA/n69XpfNZlOn6ajVas2GYbhgkjwAiNjjk+tzOoqi6/GBMEEeyLEyF8cgxTYBHDdJHijojywIggtlkC9MABGNnbzTXDfNLcB13bn4Iq9J8oUIGBedJlasc03iQXRuYkj6mFpuz+XAqOg0uVeQ2YFR0Wl6oyOzA8Ois4xdmswCktFZ1hZThQoVKpSLv1lpRA4sykLqAAAAAElFTkSuQmCC",b=i(0),f=function(t){var e=t.item,i=t.onClick,n=t.hideText;return Object(b.jsxs)("div",{style:{position:"absolute",left:e.position.x,top:e.position.y,transform:"rotate(".concat(j(e.direction),"rad)")},onClick:Object(c.useCallback)((function(){return i(e)}),[e]),children:[Object(b.jsx)("img",{src:x,width:"30",draggable:!1}),!n&&Object(b.jsx)("div",{style:{color:"white"},children:e.id})]})},O=function(t){var e=t.items,i=t.width,n=t.height,c=t.onClick,r=t.hideText;return Object(b.jsx)("div",{style:{position:"relative",userSelect:"none",width:i,height:n,overflow:"hidden",background:"black"},children:e.map((function(t){return Object(b.jsx)(f,{item:t,onClick:c,hideText:r},t.id)}))})},p=function(t){var e=t.frame+1,i=e>0&&e%Math.floor(t.turnInterval)===0?d(1):t.direction;return Object(s.a)(Object(s.a)({},t),{},{direction:i,frame:e,position:l(t.position,i)})},v=function(t){return(e=t,Array.from({length:e},(function(t,e){return e}))).map((function(t){return{id:t.toString(),position:{x:300*Math.random(),y:300*Math.random()},direction:d(1),frame:0,turnInterval:10+500*Math.random()}}));var e},m=i(42),g=i(20),A=function(t){var e=t.item,i=t.onClick,n=t.hideText;return Object(b.jsxs)(g.Container,{position:e.position,rotation:j(e.direction),click:Object(c.useCallback)((function(){return i(e)}),[e]),interactive:!0,children:[Object(b.jsx)(g.Sprite,{image:x,width:30,height:30}),!n&&Object(b.jsx)(g.Text,{text:e.id,style:{fill:"white",fontSize:12},x:0,y:30})]})},k=function(t){var e=t.width,i=t.height,n=t.items,c=t.onClick,r=t.hideText;return Object(b.jsx)(g.Stage,{width:e,height:i,options:{antialias:!0,autoDensity:!0},children:n.map((function(t){return Object(b.jsx)(A,{item:t,onClick:c,hideText:r},t.id)}))})};!function(t){t[t.index=0]="index",t[t.div=1]="div",t[t.pixi=2]="pixi",t[t.pixiFiber=3]="pixiFiber",t[t.pixiVanilla=4]="pixiVanilla",t[t.konva=5]="konva",t[t.svg=6]="svg"}(n||(n={}));var w=Object(c.createContext)(n.index),C=function(t){var e=t.path,i=t.children;return e===Object(c.useContext)(w)?Object(b.jsx)(b.Fragment,{children:i}):Object(b.jsx)(b.Fragment,{})},y=function(t){var e=t.path,i=t.children;return Object(b.jsx)(w.Provider,{value:e,children:i})},T=(i(64),i(21)),S=i(6),M=function(t){var e=t.item,i=t.onClick,n=t.hideText;return Object(b.jsxs)(T.Container,{position:e.position,rotation:j(e.direction),click:Object(c.useCallback)((function(){return i(e)}),[e]),interactive:!0,children:[Object(b.jsx)(T.Sprite,{texture:S.Texture.from(x),width:30,height:30}),!n&&Object(b.jsx)(T.Text,{text:e.id,style:{fill:"white",fontSize:12},x:0,y:30})]})},F=function(t){var e=t.width,i=t.height,n=t.items,c=t.onClick,r=t.hideText;return Object(b.jsx)(T.Stage,{options:{width:e,height:i,antialias:!0,autoDensity:!0,resolution:window.devicePixelRatio},children:n.map((function(t){return Object(b.jsx)(M,{item:t,onClick:c,hideText:r},t.id)}))})},D=i(18),z=function(t){var e=t.item,i=t.onClick,n=t.hideText,r=Object(c.useState)(null),a=Object(u.a)(r,2),o=a[0],s=a[1];return Object(c.useEffect)((function(){var t=new window.Image;t.src=x,t.addEventListener("load",(function(){return s(t)}))}),[]),Object(b.jsxs)(D.a,{position:e.position,rotation:h(e.direction),click:Object(c.useCallback)((function(){return i(e)}),[e]),interactive:!0,children:[o&&Object(b.jsx)(D.b,{image:o,width:30,height:30}),!n&&Object(b.jsx)(D.e,{text:e.id,fontSize:12,x:0,y:30})]})},R=function(t){var e=t.width,i=t.height,n=t.items,c=t.onClick,r=t.hideText;return Object(b.jsx)(D.d,{width:e,height:i,options:{antialias:!0,autoDensity:!0},children:Object(b.jsx)(D.c,{children:n.map((function(t){return Object(b.jsx)(z,{item:t,onClick:c,hideText:r},t.id)}))})})},E=function(t){var e=t.item,i=t.onClick,n=t.hideText;return Object(b.jsxs)("g",{transform:"translate(".concat(e.position.x,", ").concat(e.position.y,") rotate(").concat(h(e.direction),")"),onClick:Object(c.useCallback)((function(){return i(e)}),[e]),children:[Object(b.jsx)("image",{href:x,width:"30"}),!n&&Object(b.jsx)("text",{y:40,fill:"white",children:e.id})]})},P=function(t){var e=t.items,i=t.width,n=t.height,c=t.onClick,r=t.hideText;return Object(b.jsx)("div",{style:{position:"relative",userSelect:"none",overflow:"hidden",background:"black"},children:Object(b.jsx)("svg",{width:i,height:n,children:e.map((function(t){return Object(b.jsx)(E,{item:t,onClick:c,hideText:r},t.id)}))})})},I=i(48),Y=i(29),B=i(45),L=i(46),U=i(49),V=i(47),Z=function(t){Object(U.a)(i,t);var e=Object(V.a)(i);function i(t){var n;return Object(B.a)(this,i),(n=e.call(this)).id="",n.sprite=new S.Sprite(S.Texture.from(x)),n.text=new S.Text("",{fill:"white",fontSize:12}),n.id=t,n.sprite.width=30,n.addChild(n.sprite),n.text.y=30,n.addChild(n.text),n.interactive=!0,n}return Object(L.a)(i,[{key:"update",value:function(t){this.rotation=j(t.direction),this.x=t.position.x,this.y=t.position.y,this.text.text=t.id}}]),i}(S.Container),N=function(t){return t instanceof Z},G=function(t){var e=t.items,i=t.width,n=t.height,r=t.onClick,a=t.hideText,o=Object(c.useState)(null),s=Object(u.a)(o,2),l=s[0],d=s[1],j=Object(c.useRef)(null);return Object(c.useEffect)((function(){var t=new S.Application({width:i,height:n,antialias:!0,autoDensity:!0,resolution:window.devicePixelRatio});j.current.appendChild(t.view),d(t)}),[]),Object(c.useEffect)((function(){var t;if(l){var i,n=l.stage.children.filter(N),c=Object(Y.a)(e);try{var a=function(){var t=i.value,e=n.find((function(e){return e.id===t.id}));void 0===e&&(e=new Z(t.id),l.stage.addChild(e)),e.update(t),e.addListener("click",(function(){return r(t)}))};for(c.s();!(i=c.n()).done;)a()}catch(s){c.e(s)}finally{c.f()}var o=e.map((function(t){return t.id}));(t=l.stage).removeChild.apply(t,Object(I.a)(n.filter((function(t){return!o.includes(t.id)}))))}}),[e]),Object(c.useEffect)((function(){if(l){var t,e=l.stage.children.filter(N),i=Object(Y.a)(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;a?n.text.parent&&n.removeChild(n.text):n.text.parent||n.addChild(n.text)}}catch(c){i.e(c)}finally{i.f()}}}),[a]),Object(b.jsx)("div",{ref:j})};var J=function(){var t,e,i=Object(c.useState)([]),r=Object(u.a)(i,2),a=r[0],o=r[1],l=Object(c.useState)(100),d=Object(u.a)(l,2),j=d[0],h=d[1],x=Object(c.useState)(n.index),f=Object(u.a)(x,2),g=f[0],A=f[1],w=Object(c.useState)(""),T=Object(u.a)(w,2),S=T[0],M=T[1],D=Object(c.useState)(!1),z=Object(u.a)(D,2),E=z[0],I=z[1];Object(c.useEffect)((function(){o(v(j))}),[g,j]),t=function(){o((function(t){return t.map(p)}))},e=[o],Object(c.useEffect)((function(){var e;return e=requestAnimationFrame((function i(){t(),e=requestAnimationFrame(i)})),function(){return cancelAnimationFrame(e)}}),e);var Y={width:1e3,height:1e3,items:a,hideText:E,onClick:function(t){return M("".concat((new Date).toLocaleTimeString(),": click ").concat(t.id))}};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("header",{children:[Object(b.jsxs)("h1",{children:["React with ","<canvas>"," Performance Test"]}),Object(b.jsxs)("select",{value:g,onChange:function(t){return A(parseInt(t.currentTarget.value))},children:[Object(b.jsx)("option",{value:n.index,children:"Home"}),Object(b.jsx)("option",{value:n.div,children:"Div Renderer"}),Object(b.jsx)("option",{value:n.pixi,children:"@inlet/react-pixi"}),Object(b.jsx)("option",{value:n.pixiFiber,children:"react-pixi-fiber"}),Object(b.jsx)("option",{value:n.konva,children:"react-konva"}),Object(b.jsx)("option",{value:n.svg,children:"SVG"}),Object(b.jsx)("option",{value:n.pixiVanilla,children:"pixi.js (Vanilla)"})]}),Object(b.jsx)("select",{value:j,onChange:function(t){return h(parseInt(t.currentTarget.value))},children:[10,100,1e3,1e4].map((function(t){return Object(b.jsxs)("option",{value:t,children:[t," items"]},t)}))}),Object(b.jsx)("button",{onClick:function(){return o(v(j))},children:"Reset"}),Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{type:"checkbox",onChange:function(t){return I(t.currentTarget.checked)}}),"Hide Text"]})]}),Object(b.jsx)("div",{className:"fps",children:Object(b.jsx)(m.a,{top:"auto",left:"auto"})}),Object(b.jsxs)(y,{path:g,children:[Object(b.jsx)(C,{path:n.index,children:Object(b.jsx)("div",{children:"Select the renderer"})}),Object(b.jsx)(C,{path:n.div,children:Object(b.jsx)(O,Object(s.a)({},Y))}),Object(b.jsx)(C,{path:n.pixi,children:Object(b.jsx)(k,Object(s.a)({},Y))}),Object(b.jsx)(C,{path:n.pixiFiber,children:Object(b.jsx)(F,Object(s.a)({},Y))}),Object(b.jsx)(C,{path:n.konva,children:Object(b.jsx)(R,Object(s.a)({},Y))}),Object(b.jsx)(C,{path:n.svg,children:Object(b.jsx)(P,Object(s.a)({},Y))}),Object(b.jsx)(C,{path:n.pixiVanilla,children:Object(b.jsx)(G,Object(s.a)({},Y))})]}),Object(b.jsx)("div",{className:"log",children:S})]})},K=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,108)).then((function(e){var i=e.getCLS,n=e.getFID,c=e.getFCP,r=e.getLCP,a=e.getTTFB;i(t),n(t),c(t),r(t),a(t)}))};o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(J,{})}),document.getElementById("root")),K()},53:function(t,e,i){},64:function(t,e,i){}},[[107,1,2]]]);
//# sourceMappingURL=main.119bf159.chunk.js.map